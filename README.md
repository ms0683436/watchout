# 🛡️ Privacy Guard - 動態專注力助手

當同事走到你身後時，螢幕上敏感的內容會自動模糊處理，保護你的隱私。

## ✨ 功能特色

- 🎯 **智慧臉部偵測**: 使用 Qualcomm AI Hub 臉部辨識模型
- 🔒 **自動隱私保護**: 偵測到多人時自動模糊螢幕
- ⚡ **即時響應**: 低延遲的偵測和響應
- 🛠️ **CLI 設定工具**: 簡單的命令列介面調整設定
- ⌨️ **快捷鍵支援**: ESC 暫時關閉隱私模式
- 📝 **詳細日誌**: 完整的偵測記錄

## 🚀 快速開始

### 1. 啟動虛擬環境
```bash
source venv/bin/activate
```

### 2. 執行設定工具 (首次使用建議)
```bash
python setup.py
```

### 3. 直接啟動 Privacy Guard
```bash
python main.py
```

## ⚙️ 設定選項

使用設定工具可以調整以下參數：

| 設定項目 | 說明 | 預設值 |
|---------|------|--------|
| 臉部偵測閾值 | 臉部偵測的信心度門檻 | 0.7 |
| 隱私模式延遲 | 偵測到多人後啟動隱私模式的延遲時間 | 2.0 秒 |
| 暫時關閉時間 | 按 ESC 後暫時關閉隱私模式的時間 | 10 秒 |
| 攝影機索引 | 使用的攝影機編號 | 0 |
| 覆蓋層透明度 | 隱私模式的螢幕覆蓋透明度 | 0.8 |
| 偵測間隔 | 臉部偵測的執行間隔 | 0.1 秒 |

## 🎮 使用方式

1. **正常模式**: 只有一人或無人時，螢幕正常顯示
2. **隱私模式**: 偵測到多人時，自動啟動全螢幕模糊覆蓋
3. **暫時關閉**: 按 `ESC` 鍵可暫時關閉隱私模式 10 秒
4. **結束程式**: 按 `Ctrl+C` 結束應用程式

## 📋 系統需求

- macOS (已測試)
- Python 3.8+
- 網路攝影機
- 以下 Python 套件：
  - opencv-python
  - onnxruntime
  - numpy
  - pyautogui
  - pillow
  - tkinter (通常內建)

## 🔧 故障排除

### 攝影機無法開啟
1. 檢查攝影機是否被其他應用程式佔用
2. 嘗試調整攝影機索引設定
3. 使用設定工具的「測試攝影機」功能

### 模型載入失敗
1. 確認 `model.onnx/model.onnx` 檔案存在
2. 檢查檔案是否完整下載
3. 確認 onnxruntime 正確安裝

### 隱私模式無法啟動
1. 確認系統允許應用程式顯示覆蓋層
2. 檢查是否有防毒軟體阻擋
3. 確認 tkinter 正常運作

## 📁 檔案結構

```
.
├── main.py              # 主程式
├── setup.py             # CLI 設定工具
├── config.py            # 配置檔案
├── model.onnx/          # AI 模型目錄
│   ├── model.onnx       # ONNX 模型檔案
│   └── model.data       # 模型資料
├── venv/                # 虛擬環境
└── README.md            # 說明文件
```

## 🔒 隱私聲明

- 所有影像處理皆在本地執行
- 不會上傳任何攝影機畫面到網路
- 不會儲存攝影機影像
- 僅記錄偵測統計資料（可選）

## 🐛 已知問題

- 在某些 macOS 版本上，首次執行可能需要授權攝影機權限
- 強光或背光環境可能影響偵測準確度
- 部分虛擬攝影機可能不相容

## 📞 支援

如果遇到問題，請檢查：
1. 終端輸出的錯誤訊息
2. 攝影機權限設定
3. Python 環境是否正確

## 🚀 進階功能

### 自訂偵測區域
修改 `main.py` 中的 `detect_faces` 函數來限制偵測區域。

### 整合其他應用
可以修改 `update_privacy_status` 函數來整合其他隱私保護措施。

### 多螢幕支援
目前支援主螢幕，多螢幕支援正在開發中。

---

💡 **提示**: 建議先使用設定工具調整參數，找到最適合你環境的設定值。
